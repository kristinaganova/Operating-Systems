# –ó–∞–¥–∞—á–∞ 2024-IN-01: 

## –û–ø–∏—Å–∞–Ω–∏–µ
2024-IN-01
–í–∞—à–∏—Ç–µ –∫–æ–ª–µ–≥–∏ –æ—Ç —Å—ä—Å–µ–¥–Ω–∞—Ç–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –∏–∑–ø–æ–ª–∑–≤–∞—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω–∏
(–°–°–°–î), –∫–æ—è—Ç–æ —Ä–∞–±–æ—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ —Å –¥–≤–∞ –≤–∏–¥–∞ –æ–±–µ–∫—Ç–∏ ‚Äì volume-–∏ (—Ç–µ–∫—É—â–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ –±–ª–æ–∫–æ–≤–æ
—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ) –∏ snapshot-–∏ (—Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ –¥–∞–¥–µ–Ω –æ–±–µ–∫—Ç). –í—Å–µ–∫–∏ –æ–±–µ–∫—Ç –∏–º–∞ —É–Ω–∏–∫–∞–ª–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
ùëñùëë ‚àà ‚Ñï0, –∫–∞—Ç–æ —Å—Ç–æ–π–Ω–æ—Å—Ç 0 –µ –∑–∞–ø–∞–∑–µ–Ω–∞. –¢–µ–∫—É—â–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –°–°–°–î –µ –æ–ø–∏—Å–∞–Ω–æ –≤ binary —Ñ–∞–π–ª, –∫–æ–π—Ç–æ —Å–µ
—Å—ä—Å—Ç–æ–∏ –æ—Ç —Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ –≤ —Å–ª–µ–¥–Ω–∏—è —Ä–µ–¥:
- —Å–µ–∫—Ü–∏—è header ‚Äì —Å—ä—Å—Ç–æ–∏ —Å–µ –æ—Ç —á–µ—Ç–∏—Ä–∏ uint16_t –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏:
           1. magic ‚Äì –≤—Å–∏—á–∫–∏ —Å–ª—É–∂–µ–±–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ –°–°–°–î –∏–º–∞—Ç –º–∞–≥–∏—á–µ—Å–∫–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç 0x6963;
           2. ver ‚Äì –≤–µ—Ä—Å–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç –Ω–∞ —Ñ–∞–π–ª–∞, –≤ —Ç–∞–∑–∏ –∑–∞–¥–∞—á–∞ —Ä–∞–∑–≥–ª–µ–∂–¥–∞–º–µ —Ñ–∞–π–ª–æ–≤–µ —Å —Ñ–æ—Ä–º–∞—Ç 0x6e73;
           3. cp ‚Äì –±—Ä–æ–π –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –≤ preambule —Å–µ–∫—Ü–∏—è—Ç–∞;
           4. co ‚Äì –±—Ä–æ–π –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –≤ objects —Å–µ–∫—Ü–∏—è—Ç–∞;
- —Å–µ–∫—Ü–∏—è preamble - —Å—ä–¥—ä—Ä–∂–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ —Å—ä—Å —Å–ª–µ–¥–Ω–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
           1. v1, uint16_t;
           2. v2, uint16_t;
           3. v3, uint32_t;
‚Äì preamble –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –Ω–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –ø—Ä—è–∫–æ –≤ –∑–∞–¥–∞—á–∞—Ç–∞;
- —Å–µ–∫—Ü–∏—è objects ‚Äì —Å—ä–¥—ä—Ä–∂–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ —Å—ä—Å —Å–ª–µ–¥–Ω–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–∏—Ç–æ –æ–ø–∏—Å–≤–∞—Ç –æ–±–µ–∫—Ç–∏ –æ—Ç –°–°–°–î:
           1. ctime, uint32_t ‚Äì –≤—Ä–µ–º–µ –Ω–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –æ–±–µ–∫—Ç–∞ (Unix/Epoch time);
           2. opt, uint16_t ‚Äì —Å—ä–¥—ä—Ä–∂–∞ —Ñ–ª–∞–≥–æ–≤–µ, –æ–ø–∏—Å–≤–∞—â–∏ —Ä–∞–∑–ª–∏—á–Ω–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞ –æ–±–µ–∫—Ç–∞; –¥–≤–∞—Ç–∞
–Ω–∞–π-—Å—Ç–∞—Ä—à–∏ –±–∏—Ç–∞ –æ–ø–∏—Å–≤–∞—Ç –≤–∏–¥–∞ –Ω–∞ –æ–±–µ–∫—Ç–∞, –∫–∞—Ç–æ 00 —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –∑–∞ volume, a 10 ‚Äì –∑–∞ snapshot;
           3. parent_id, uint16_t ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –ø—Ä–µ–¥—Ö–æ–∂–¥–∞—â –æ–±–µ–∫—Ç (—Ä–æ–¥–∏—Ç–µ–ª, –ø—Ä–µ–¥–∏—à–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è
–Ω–∞ –æ–±–µ–∫—Ç–∞), –∫–∞—Ç–æ –∞–∫–æ –æ–±–µ–∫—Ç—ä—Ç –Ω—è–º–∞ —Ä–æ–¥–∏—Ç–µ–ª, —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ parent_id –µ 0;
           4. size, uint32_t ‚Äì —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ–±–µ–∫—Ç–∞ –≤ –±–∞–π—Ç–æ–≤–µ;
           5. ssize, uint32_t ‚Äì –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ –±–∞–π—Ç–æ–≤–µ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –æ–±–µ–∫—Ç–∞, ùë†ùë†ùëñùëßùëí ‚àà [0, ùë†ùëñùëßùëí].
–ó–∞–±–µ–ª–µ–∂–∫–∏:
- —Å—ä–æ—Ç–Ω–æ—à–µ–Ω–∏–µ—Ç–æ –Ω–∞ ssize –∫—ä–º size –Ω–∞ –¥–∞–¥–µ–Ω –æ–±–µ–∫—Ç —â–µ –Ω–∞—Ä–∏—á–∞–º–µ –∫–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞ –∑–∞–ø—ä–ª–≤–∞–Ω–µ;
- –æ—Ç–º–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –æ—Ç objects —Å–µ–∫—Ü–∏—è—Ç–∞ —Å–ø—Ä—è–º–æ –Ω–∞—á–∞–ª–æ—Ç–æ —ù (–≤ –±—Ä–æ–π –µ–ª–µ–º–µ–Ω—Ç–∏) –¥–µ—Ñ–∏–Ω–∏—Ä–∞ id
–Ω–∞ –æ–±–µ–∫—Ç–∞, –æ–ø–∏—Å–∞–Ω –æ—Ç –µ–ª–µ–º–µ–Ω—Ç–∞.
–°—ä—â–µ—Å—Ç–≤—É–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –°–°–°–î, –∫–æ—è—Ç–æ —Å–ø—Ä—è–º–æ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞ –¥–Ω–µ–≤–Ω–∏ snapshot-–∏ –Ω–∞ –Ω—è–∫–æ–∏ volume-–∏. –î–µ—Ñ–∏–Ω–∏—Ü–∏—è—Ç–∞ –∑–∞ –¥–Ω–µ–≤–µ–Ω snapshot –µ —Ç–∞–∫—ä–≤ snapshot, –∫–æ–π—Ç–æ –µ
–Ω–∞ –≤—Ä–µ–º–µ-—Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –µ–¥–∏–Ω –¥–µ–Ω –ø–ª—é—Å-–º–∏–Ω—É—Å 10 –º–∏–Ω—É—Ç–∏ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è —Å–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ–¥–∏–Ω volume –∏ —Ç—Ä–∏
–Ω–µ–≥–æ–≤–∏ snapshot-–∞ –∏–∑–≥–ª–µ–∂–¥–∞—Ç –ø–æ —Å–ª–µ–¥–Ω–∏—è –Ω–∞—á–∏–Ω:
–ù–∞–ø–∏—à–µ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–∞, –∫–æ—è—Ç–æ –ø—Ä–∏–µ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä ‚Äì –∏–º–µ –Ω–∞ —Ñ–∞–π–ª –≤ –æ–ø–∏—Å–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç. –ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —Ç—Ä—è–±–≤–∞
–¥–∞ –ø—Ä–µ—Å–º—è—Ç–∞ –∏ –∏–∑–≤–µ–∂–¥–∞ –Ω–∞ STDOUT –∫–æ–ª–∫–æ –µ –ø—Ä–µ—Ç–µ–≥–ª–µ–Ω–∞—Ç–∞ –ø–æ —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ–±–µ–∫—Ç–∞ —Å—Ä–µ–¥–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –Ω–∞ –∫–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –Ω–∞ –∑–∞–ø—ä–ª–≤–∞–Ω–µ –∑–∞ –¥–Ω–µ–≤–Ω–∏—Ç–µ snapshot-–∏. –ö–æ–ª–µ–≥–∏—Ç–µ –≤–∏ –∏—Å–∫–∞—Ç –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –¥–∞ –º–∏–Ω–∏–º–∏–∑–∏—Ä–∞ –±—Ä–æ—è
           | id  | parent_id  | ctime
volume 420 | 420 |   13       | 1704212400
snapshot C | 13  |   8        | 1704471480
snapshot B | 8   |   3        | 1704385182
snapshot A | 3   |   0        | 1704298880

–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ —Å –ø–ª–∞–≤–∞—â–∞ –∑–∞–ø–µ—Ç–∞—è (floating-point operations), –∑–∞ –¥–∞ –Ω–µ —Å–µ –Ω–∞—Ç—Ä—É–ø–≤–∞ –≥—Ä–µ—à–∫–∞.
–ó–∞–±–µ–ª–µ–∂–∫–∞: –ü—Ä–∏ –Ω–µ–ø—Ä–∞–∑–Ω–∞ –Ω–∞—Ä–µ–¥–µ–Ω–∞ ùëõ-—Ç–æ—Ä–∫–∞ –æ—Ç —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ 
---
